<VirtualHost *:80>

    ServerName omeusitio2.lan
    ServerAlias  www.omeusitio2.lan

    DocumentRoot /opt/web/omeusitio2.lan/htdocs

    <Directory /opt/web/omeusitio2.lan/htdocs>
        Require all granted
        Options Indexes
        AllowOverride AuthConfig FileInfo
    </Directory>

    <Location /secure>
        <RequireAll>
            Require not ip 192.168.58.20
            Require all granted
            Require not host *.apache.lan
        </RequireAll>
    </Location>

</VirtualHost>

<VirtualHost *:443>

    ServerName omeusitio2.lan
    ServerAlias  www.omeusitio2.lan

    SSLEngine on
    SSLCertificateFile "/certificados/omeusitio.pem"
    SSLCertificateKeyFile "/certificados/omeusitio.key"

    DocumentRoot /opt/web/omeusitio2.lan/htdocs

    <Directory /opt/web/omeusitio2.lan/htdocs>
        Require all granted
        Options Indexes
        AllowOverride AuthConfig FileInfo
    </Directory>

    <Location /secure>
        <RequireAll>
            Require not ip 192.168.58.20
            Require all granted
            Require not host *.apache.lan
        </RequireAll>
    </Location>

    LogFormat "%a %t %I %O %T %u %>s %r %{User-agent}i" acceso
    CustomLog "/var/log/apache2/acceso.log" acceso
    
    ErrorLog /var/log/apache2/omeusitio.lan/erros.log 
    ErrorLogFormat "%a %t "

</VirtualHost>